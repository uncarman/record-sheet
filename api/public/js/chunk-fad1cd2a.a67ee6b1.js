(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-fad1cd2a","chunk-8d5f1a68"],{"2c0a":function(t,a,e){"use strict";e.d(a,"b",function(){return o}),e.d(a,"a",function(){return l}),e.d(a,"c",function(){return r});var n=e("9bd2");function o(t){return Object(n.a)({url:"/locations",method:"get",params:t})}function l(t){return Object(n.a)({url:"/locations/".concat(t),method:"delete"})}function r(t){return Object(n.a)({url:"/locations",method:"post",data:t})}},"590d":function(t,a,e){"use strict";e.r(a);var n=e("d89d");a.default=n.default},d89d:function(t,a,e){"use strict";e.r(a);var n=e("9bd2");var o=e("2c0a"),l={name:"page",data:function(){return{tableData:[],totalPage:1,page:1,tableLoading:!1,locations:[],params:{location_id:"",type:"",sort_by:"",order:""},types:["电梯","灭火器","消防栓","故障报修"]}},created:function(){this.requestData(),this.requestLocationsData()},methods:{requestData:function(){var a=this;this.tableLoading||(this.tableLoading=!0,function(t){return Object(n.a)({url:"/maintain_logs",method:"get",params:t})}(this.params).then(function(t){a.tableLoading=!1,a.tableData=t.data,a.totalPage=t.meta.last_page}).catch(function(){a.tableLoading=!1}))},requestLocationsData:function(){var a=this;Object(o.b)({is_all:1}).then(function(t){a.locations=t.data})},sortChange:function(t){this.params.sort_by=t.prop,this.params.order="descending"===t.order?"desc":"asc",this.requestData()}}},r=e("2877"),s=function(t){t.options.__source="src/views/maintain_logs/index/page.vue"},i=Object(r.a)(l,function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("d2-container",[e("el-row",{staticClass:"d2-mt d2-mb"},[e("el-select",{staticClass:"d2-mr-20",attrs:{placeholder:"请选择地点"},model:{value:a.params.location_id,callback:function(t){a.$set(a.params,"location_id",t)},expression:"params.location_id"}},[e("el-option",{key:"0",attrs:{value:"",label:"所有地点"}}),a._l(a.locations,function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})],2),e("el-select",{staticClass:"d2-mr-20",attrs:{placeholder:"请选择设备类型"},model:{value:a.params.type,callback:function(t){a.$set(a.params,"type",t)},expression:"params.type"}},[e("el-option",{key:"0",attrs:{value:"",label:"所有类型"}}),a._l(a.types,function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})],2),e("el-button",{attrs:{loading:a.tableLoading},on:{click:a.requestData}},[a._v("查询")])],1),e("el-row",[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:a.tableData},on:{"sort-change":a.sortChange}},[e("el-table-column",{attrs:{prop:"device.name",label:"设备名称"}}),e("el-table-column",{attrs:{prop:"logger_name",label:"巡检人员"}}),e("el-table-column",{attrs:{prop:"logger_phone",label:"联系方式"}}),e("el-table-column",{attrs:{prop:"result",label:"巡检结果",width:"100"},scopedSlots:a._u([{key:"default",fn:function(t){return[e("el-tag",{attrs:{type:t.row.result?"success":"danger","disable-transitions":""}},[a._v(a._s(t.row.result?"正常":"异常")+"\n                    ")])]}}])}),e("el-table-column",{attrs:{prop:"abnormal_desc",label:"异常原因",width:"200"}}),e("el-table-column",{attrs:{prop:"created_at",label:"时间",sortable:"custom",width:"200"}})],1)],1),e("el-row",{staticClass:"d2-mt d2-mb"},[e("el-pagination",{attrs:{background:"","hide-on-single-page":"",layout:"prev, pager, next","current-page":a.page,"page-count":a.totalPage},on:{"update:currentPage":function(t){a.page=t},"update:current-page":function(t){a.page=t},"current-change":a.requestData}})],1)],1)},[],!1,null,"40c9e450",null);"function"==typeof s&&s(i);a.default=i.exports}}]);