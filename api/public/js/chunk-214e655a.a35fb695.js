(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-214e655a","chunk-3996a876"],{1795:function(e,t,r){"use strict";var a=r("5a5b");r.n(a).a},"2c0a":function(e,t,r){"use strict";r.d(t,"b",function(){return o}),r.d(t,"a",function(){return n}),r.d(t,"c",function(){return c});var a=r("9bd2");function o(e){return Object(a.a)({url:"/locations",method:"get",params:e})}function n(e){return Object(a.a)({url:"/locations/".concat(e),method:"delete"})}function c(e){return Object(a.a)({url:"/locations",method:"post",data:e})}},"2f75":function(e,t,r){"use strict";r.d(t,"b",function(){return o}),r.d(t,"a",function(){return n}),r.d(t,"c",function(){return c});var a=r("9bd2");function o(e){return Object(a.a)({url:"/devices",method:"get",params:e})}function n(e){return Object(a.a)({url:"/devices/".concat(e),method:"delete"})}function c(e){return Object(a.a)({url:"/devices",method:"post",data:e})}},"5a5b":function(e,t,r){},6880:function(e,t,r){"use strict";r.r(t);var a=r("2c0a"),o=r("2f75"),n=r("5c96"),c={name:"page",data:function(){return{types:["电梯","灭火器","消防栓"],locations:[],form:{name:"",sn:"",type:"",location_id:"",model:"",expired_at:"",desc:"",check_items:[{name:""}]},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],sn:[{required:!0,message:"请输入编号",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"change"}],location_id:[{required:!0,message:"请选择所在位置",trigger:"change"}]},createLoading:!1}},created:function(){this.requestLocations()},methods:{requestLocations:function(){var t=this;Object(a.b)({is_all:1}).then(function(e){t.locations=e.data})},addCheckItem:function(){this.form.check_items.push({name:""})},resetFormData:function(){this.$refs.form.resetFields(),this.form.check_items=[{name:""}]},requestCreate:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return!1;t.createLoading||(t.createLoading=!0,Object(o.c)(t.form).then(function(e){t.createLoading=!1,t.resetFormData(),Object(n.Message)({message:e.message,type:"success",duration:3e3})}).catch(function(){t.createLoading=!1}))})}}},s=(r("1795"),r("2877")),l=function(e){e.options.__source="src/views/devices/create/page.vue"},i=Object(s.a)(c,function(){var a=this,e=a.$createElement,o=a._self._c||e;return o("d2-container",[o("el-row",{staticClass:"d2-mt d2-mb"},[o("el-col",[o("el-form",{directives:[{name:"loading",rawName:"v-loading",value:a.createLoading,expression:"createLoading"}],ref:"form",attrs:{refs:"form",rules:a.rules,model:a.form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"名称",prop:"name"}},[o("el-col",{attrs:{span:12}},[o("el-input",{model:{value:a.form.name,callback:function(e){a.$set(a.form,"name",e)},expression:"form.name"}})],1)],1),o("el-form-item",{attrs:{label:"编号",prop:"sn"}},[o("el-col",{attrs:{span:12}},[o("el-input",{model:{value:a.form.sn,callback:function(e){a.$set(a.form,"sn",e)},expression:"form.sn"}})],1)],1),o("el-form-item",{attrs:{label:"类型",prop:"type"}},[o("el-select",{attrs:{placeholder:"请选择类型"},model:{value:a.form.type,callback:function(e){a.$set(a.form,"type",e)},expression:"form.type"}},a._l(a.types,function(e,t){return o("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),o("el-form-item",{attrs:{label:"所在位置",prop:"location_id"}},[o("el-select",{attrs:{placeholder:"请选择所在位置"},model:{value:a.form.location_id,callback:function(e){a.$set(a.form,"location_id",e)},expression:"form.location_id"}},a._l(a.locations,function(e,t){return o("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1)],1),o("el-form-item",{attrs:{label:"型号",prop:"model"}},[o("el-col",{attrs:{span:12}},[o("el-input",{model:{value:a.form.model,callback:function(e){a.$set(a.form,"model",e)},expression:"form.model"}})],1)],1),o("el-form-item",{attrs:{label:"有效期",prop:"expired_at"}},[o("el-col",{attrs:{span:12}},[o("el-date-picker",{attrs:{type:"date",placeholder:"请选择有效期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:a.form.expired_at,callback:function(e){a.$set(a.form,"expired_at",e)},expression:"form.expired_at"}})],1)],1),o("el-form-item",{attrs:{label:"检查项"}},[o("el-col",{attrs:{span:12}},[a._l(a.form.check_items,function(t,r){return o("el-row",{key:r,staticClass:"d2-mt-10 d2-mb-10"},[o("el-col",{staticClass:"d2-mr-10",attrs:{span:21}},[o("el-input",{model:{value:t.name,callback:function(e){a.$set(t,"name",e)},expression:"item.name"}})],1),o("el-col",{attrs:{span:2}},[o("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-remove"},on:{click:function(e){return a.form.check_items.splice(r,1)}}})],1)],1)}),o("el-button",{attrs:{icon:"el-icon-plus"},on:{click:a.addCheckItem}},[a._v("增加一项")])],2)],1),o("el-form-item",{staticClass:"ueditor-form-item",attrs:{label:"设备描述",prop:"desc"}},[o("d2-ueditor",{model:{value:a.form.desc,callback:function(e){a.$set(a.form,"desc",e)},expression:"form.desc"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:a.requestCreate}},[a._v("添加设备")])],1)],1)],1)],1)],1)},[],!1,null,null,null);"function"==typeof l&&l(i);t.default=i.exports},8091:function(e,t,r){"use strict";r.r(t);var a=r("6880");t.default=a.default}}]);